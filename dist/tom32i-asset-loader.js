/*!
 * tom32i-asset-loader.js - 2.0.0
 * https://github.com/Tom32i/asset-loader.js
 * Copyright 2016 Thomas JARRAND
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AssetLoader=t():e.AssetLoader=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),r=i(o),a=n(2),s=i(a),u=n(3),c=i(u);e.exports={Asset:r["default"],SpriteAsset:s["default"],SoundAsset:c["default"]}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,e),this.source=t,this.element=new Image,this.element.asset=this,this.element.addEventListener("load",i),o&&this.load()}return i(e,[{key:"setSource",value:function(e){this.source=e}},{key:"load",value:function(){this.element.src=this.source}},{key:"getImage",value:function(){return this.element}},{key:"getWidth",value:function(){return this.element.width}},{key:"getHeight",value:function(){return this.element.height}}]),e}();t["default"]=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),s=i(a),u=n(4),c=i(u),l=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o(this,e),this.source=t,this.columns=n,this.rows=i,this.callback=r,this.length=n*i,this.width=0,this.height=0,this.images=[],this.assets=[],this.loaded=0,this.preLoaded=this.preLoaded.bind(this),this.partLoaded=this.partLoaded.bind(this),this.createImages(),a&&this.load()}return r(e,[{key:"load",value:function(){var e=new s["default"](this.source,this.preLoaded.bind(this));this.source=e.getImage(),e.load()}},{key:"createImages",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++){var n=new s["default"](null,this.partLoaded);this.assets.push({asset:n,row:e,col:t}),this.images.push(n.getImage())}}},{key:"preLoaded",value:function(e){var t=this;this.width=this.source.width/this.columns,this.height=this.source.height/this.rows,this.canvas=new c["default"](this.width,this.height),this.assets.forEach(function(e){var n=e.asset,i=e.col*t.width,o=e.row*t.height;t.canvas.clear(),t.canvas.drawImageFromSource(t.source,i,o),n.setSource(t.canvas.toString()),n.load()}),delete this.canvas}},{key:"partLoaded",value:function(e){this.loaded++,this.loaded===this.images.length&&this.callback.call()}},{key:"getImages",value:function(){return this.images}}]),e}();t["default"]=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.formats;n(this,e),this.source=t,this.formats=r,this.element=new Audio,this.element.asset=this,this.element.addEventListener("canplaythrough",i),this.attachSources(),o&&this.load()}return i(e,[{key:"attachSources",value:function(){for(var e in this.formats){var t=document.createElement("source");t.type=this.formats[e],this.element.appendChild(t)}}},{key:"load",value:function(){var e=this;document.body.appendChild(this.element),this.formats.forEach(function(t,n){e.element.childNodes[n].src=e.source+"."+t})}},{key:"getAudio",value:function(){return this.element}}]),e}();o.formats={mp3:"audio/mpeg",ogg:"audio/ogg"},t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.width=t,this.element.height=i}return i(e,[{key:"clear",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"toString",value:function(){return this.element.toDataURL()}},{key:"drawImageFromSource",value:function(e,t,n){var i=this.element,o=i.width,r=i.height;this.context.drawImage(e,t,n,o,r,0,0,o,r)}}]),e}();t["default"]=o}])});
//# sourceMappingURL=tom32i-asset-loader.js.map